\doxysection{Surface\+Types.\+h}
\label{_surface_types_8h_source}\index{core/surface\_gen/SurfaceTypes.h@{core/surface\_gen/SurfaceTypes.h}}
\mbox{\hyperlink{_surface_types_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ "{}../../foundation/math/Vector3f.h"{}}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ "{}../../foundation/math/Vector2f.h"{}}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ "{}../../foundation/math/Vector3i.h"{}}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ "{}../../foundation/math/Vector4f.h"{}}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ "{}../../foundation/math/Matrix4f.h"{}}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ "{}../../foundation/math/BoundingBox.h"{}}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ "{}../voxel\_data/VoxelTypes.h"{}}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ <cstdint>}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#include\ <chrono>}}
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ \textcolor{keyword}{namespace\ }VoxelEditor\ \{}
\DoxyCodeLine{00015\ \textcolor{keyword}{namespace\ }SurfaceGen\ \{}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{comment}{//\ Forward\ declarations}}
\DoxyCodeLine{00018\ \textcolor{keyword}{struct\ }Mesh;}
\DoxyCodeLine{00019\ \textcolor{keyword}{struct\ }SurfaceSettings;}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \textcolor{comment}{//\ Export\ quality\ levels}}
\DoxyCodeLine{00022\ \textcolor{keyword}{enum\ class}\ ExportQuality\ \{}
\DoxyCodeLine{00023\ \ \ \ \ Draft,\ \ \ \ \ \ \textcolor{comment}{//\ Fast\ generation,\ lower\ quality}}
\DoxyCodeLine{00024\ \ \ \ \ Standard,\ \ \ \textcolor{comment}{//\ Balanced\ quality/performance}}
\DoxyCodeLine{00025\ \ \ \ \ High,\ \ \ \ \ \ \ \textcolor{comment}{//\ High\ quality,\ slower\ generation}}
\DoxyCodeLine{00026\ \ \ \ \ Maximum\ \ \ \ \ \textcolor{comment}{//\ Best\ possible\ quality}}
\DoxyCodeLine{00027\ \};}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \textcolor{comment}{//\ Level\ of\ detail\ levels}}
\DoxyCodeLine{00030\ \textcolor{keyword}{enum\ class}\ LODLevel\ \{}
\DoxyCodeLine{00031\ \ \ \ \ LOD0\ =\ 0,\ \ \textcolor{comment}{//\ Full\ resolution\ (100\%)}}
\DoxyCodeLine{00032\ \ \ \ \ LOD1\ =\ 1,\ \ \textcolor{comment}{//\ Half\ resolution\ (50\%)}}
\DoxyCodeLine{00033\ \ \ \ \ LOD2\ =\ 2,\ \ \textcolor{comment}{//\ Quarter\ resolution\ (25\%)}}
\DoxyCodeLine{00034\ \ \ \ \ LOD3\ =\ 3,\ \ \textcolor{comment}{//\ Eighth\ resolution\ (12.5\%)}}
\DoxyCodeLine{00035\ \ \ \ \ LOD4\ =\ 4\ \ \ \textcolor{comment}{//\ Sixteenth\ resolution\ (6.25\%)}}
\DoxyCodeLine{00036\ \};}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \textcolor{comment}{//\ Material\ ID\ for\ mesh\ sections}}
\DoxyCodeLine{00039\ \textcolor{keyword}{using\ }MaterialId\ =\ uint32\_t;}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \textcolor{comment}{//\ Mesh\ data\ structure}}
\DoxyCodeLine{00042\ \textcolor{keyword}{struct\ }Mesh\ \{}
\DoxyCodeLine{00043\ \ \ \ \ std::vector<Math::Vector3f>\ vertices;}
\DoxyCodeLine{00044\ \ \ \ \ std::vector<Math::Vector3f>\ normals;}
\DoxyCodeLine{00045\ \ \ \ \ std::vector<Math::Vector2f>\ uvCoords;}
\DoxyCodeLine{00046\ \ \ \ \ std::vector<uint32\_t>\ indices;}
\DoxyCodeLine{00047\ \ \ \ \ Math::BoundingBox\ bounds;}
\DoxyCodeLine{00048\ \ \ \ \ MaterialId\ materialId\ =\ 0;}
\DoxyCodeLine{00049\ \ \ \ \ }
\DoxyCodeLine{00050\ \ \ \ \ \textcolor{comment}{//\ Utility\ functions}}
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{keywordtype}{void}\ calculateNormals();}
\DoxyCodeLine{00052\ \ \ \ \ \textcolor{keywordtype}{void}\ calculateBounds();}
\DoxyCodeLine{00053\ \ \ \ \ \textcolor{keywordtype}{bool}\ isValid()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ getMemoryUsage()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00055\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ getVertexCount()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ vertices.size();\ \}}
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ getTriangleCount()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ indices.size()\ /\ 3;\ \}}
\DoxyCodeLine{00057\ \ \ \ \ }
\DoxyCodeLine{00058\ \ \ \ \ \textcolor{comment}{//\ Clear\ all\ data}}
\DoxyCodeLine{00059\ \ \ \ \ \textcolor{keywordtype}{void}\ clear();}
\DoxyCodeLine{00060\ \ \ \ \ }
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{comment}{//\ Reserve\ memory}}
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{keywordtype}{void}\ reserve(\textcolor{keywordtype}{size\_t}\ vertexCount,\ \textcolor{keywordtype}{size\_t}\ indexCount);}
\DoxyCodeLine{00063\ \ \ \ \ }
\DoxyCodeLine{00064\ \ \ \ \ \textcolor{comment}{//\ Transform\ mesh}}
\DoxyCodeLine{00065\ \ \ \ \ \textcolor{keywordtype}{void}\ transform(\textcolor{keyword}{const}\ Math::Matrix4f\&\ matrix);}
\DoxyCodeLine{00066\ \};}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \textcolor{comment}{//\ Surface\ generation\ settings}}
\DoxyCodeLine{00069\ \textcolor{keyword}{struct\ }SurfaceSettings\ \{}
\DoxyCodeLine{00070\ \ \ \ \ \textcolor{keywordtype}{float}\ adaptiveError\ =\ 0.01f;\ \ \ \ \ \ \ \ \textcolor{comment}{//\ Error\ threshold\ for\ adaptive\ subdivision}}
\DoxyCodeLine{00071\ \ \ \ \ \textcolor{keywordtype}{bool}\ generateNormals\ =\ \textcolor{keyword}{true};\ \ \ \ \ \ \ \ \textcolor{comment}{//\ Generate\ vertex\ normals}}
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{keywordtype}{bool}\ generateUVs\ =\ \textcolor{keyword}{false};\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Generate\ UV\ coordinates}}
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{keywordtype}{int}\ smoothingIterations\ =\ 0;\ \ \ \ \ \ \ \ \textcolor{comment}{//\ Number\ of\ smoothing\ iterations}}
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{keywordtype}{float}\ simplificationRatio\ =\ 1.0f;\ \ \ \textcolor{comment}{//\ Mesh\ simplification\ ratio\ (0-\/1)}}
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{keywordtype}{bool}\ preserveSharpFeatures\ =\ \textcolor{keyword}{true};\ \ \textcolor{comment}{//\ Preserve\ sharp\ features}}
\DoxyCodeLine{00076\ \ \ \ \ \textcolor{keywordtype}{float}\ sharpFeatureAngle\ =\ 30.0f;\ \ \ \ \textcolor{comment}{//\ Angle\ threshold\ for\ sharp\ features}}
\DoxyCodeLine{00077\ \ \ \ \ }
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{keyword}{static}\ SurfaceSettings\ Default();}
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{keyword}{static}\ SurfaceSettings\ Preview();}
\DoxyCodeLine{00080\ \ \ \ \ \textcolor{keyword}{static}\ SurfaceSettings\ Export();}
\DoxyCodeLine{00081\ \ \ \ \ }
\DoxyCodeLine{00082\ \ \ \ \ \textcolor{keywordtype}{bool}\ operator==(\textcolor{keyword}{const}\ SurfaceSettings\&\ other)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00083\ \ \ \ \ \textcolor{keywordtype}{bool}\ operator!=(\textcolor{keyword}{const}\ SurfaceSettings\&\ other)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ !(*\textcolor{keyword}{this}\ ==\ other);\ \}}
\DoxyCodeLine{00084\ \ \ \ \ }
\DoxyCodeLine{00085\ \ \ \ \ \textcolor{comment}{//\ Hash\ for\ cache\ key}}
\DoxyCodeLine{00086\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ hash()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00087\ \};}
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00089\ \textcolor{comment}{//\ Hermite\ data\ for\ dual\ contouring}}
\DoxyCodeLine{00090\ \textcolor{keyword}{struct\ }HermiteData\ \{}
\DoxyCodeLine{00091\ \ \ \ \ Math::Vector3f\ position;}
\DoxyCodeLine{00092\ \ \ \ \ Math::Vector3f\ normal;}
\DoxyCodeLine{00093\ \ \ \ \ \textcolor{keywordtype}{float}\ value;}
\DoxyCodeLine{00094\ \ \ \ \ \textcolor{keywordtype}{bool}\ hasIntersection;}
\DoxyCodeLine{00095\ \ \ \ \ }
\DoxyCodeLine{00096\ \ \ \ \ HermiteData()\ :\ value(0.0f),\ hasIntersection(false)\ \{\}}
\DoxyCodeLine{00097\ \};}
\DoxyCodeLine{00098\ }
\DoxyCodeLine{00099\ \textcolor{comment}{//\ Edge\ data\ for\ dual\ contouring}}
\DoxyCodeLine{00100\ \textcolor{keyword}{struct\ }EdgeData\ \{}
\DoxyCodeLine{00101\ \ \ \ \ Math::Vector3i\ v0;\ \ \textcolor{comment}{//\ Start\ voxel\ position}}
\DoxyCodeLine{00102\ \ \ \ \ Math::Vector3i\ v1;\ \ \textcolor{comment}{//\ End\ voxel\ position}}
\DoxyCodeLine{00103\ \ \ \ \ HermiteData\ hermite;}
\DoxyCodeLine{00104\ \ \ \ \ \textcolor{keywordtype}{int}\ direction;\ \ \textcolor{comment}{//\ 0=X,\ 1=Y,\ 2=Z}}
\DoxyCodeLine{00105\ \ \ \ \ }
\DoxyCodeLine{00106\ \ \ \ \ EdgeData()\ :\ direction(0)\ \{\}}
\DoxyCodeLine{00107\ \};}
\DoxyCodeLine{00108\ }
\DoxyCodeLine{00109\ \textcolor{comment}{//\ Quad\ face\ for\ mesh\ generation}}
\DoxyCodeLine{00110\ \textcolor{keyword}{struct\ }QuadFace\ \{}
\DoxyCodeLine{00111\ \ \ \ \ uint32\_t\ vertices[4];}
\DoxyCodeLine{00112\ \ \ \ \ Math::Vector3f\ normal;}
\DoxyCodeLine{00113\ \ \ \ \ MaterialId\ material;}
\DoxyCodeLine{00114\ \ \ \ \ }
\DoxyCodeLine{00115\ \ \ \ \ QuadFace()\ :\ material(0)\ \{}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ vertices[0]\ =\ vertices[1]\ =\ vertices[2]\ =\ vertices[3]\ =\ 0;}
\DoxyCodeLine{00117\ \ \ \ \ \}}
\DoxyCodeLine{00118\ \};}
\DoxyCodeLine{00119\ }
\DoxyCodeLine{00120\ \textcolor{comment}{//\ Mesh\ generation\ event\ types}}
\DoxyCodeLine{00121\ \textcolor{keyword}{enum\ class}\ MeshGenerationEventType\ \{}
\DoxyCodeLine{00122\ \ \ \ \ Started,}
\DoxyCodeLine{00123\ \ \ \ \ Progress,}
\DoxyCodeLine{00124\ \ \ \ \ Completed,}
\DoxyCodeLine{00125\ \ \ \ \ Failed,}
\DoxyCodeLine{00126\ \ \ \ \ Cancelled}
\DoxyCodeLine{00127\ \};}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00129\ \textcolor{comment}{//\ Mesh\ generation\ event}}
\DoxyCodeLine{00130\ \textcolor{keyword}{struct\ }MeshGenerationEvent\ \{}
\DoxyCodeLine{00131\ \ \ \ \ MeshGenerationEventType\ type;}
\DoxyCodeLine{00132\ \ \ \ \ \textcolor{keywordtype}{float}\ progress;\ \ \textcolor{comment}{//\ 0.0\ to\ 1.0}}
\DoxyCodeLine{00133\ \ \ \ \ std::string\ message;}
\DoxyCodeLine{00134\ \ \ \ \ VoxelData::VoxelResolution\ resolution;}
\DoxyCodeLine{00135\ \ \ \ \ LODLevel\ lodLevel;}
\DoxyCodeLine{00136\ \ \ \ \ }
\DoxyCodeLine{00137\ \ \ \ \ MeshGenerationEvent(MeshGenerationEventType\ t\ =\ MeshGenerationEventType::Started)\ }
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ :\ type(t),\ progress(0.0f),\ resolution(VoxelData::VoxelResolution::Size\_1cm),\ }
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \ \ lodLevel(LODLevel::LOD0)\ \{\}}
\DoxyCodeLine{00140\ \};}
\DoxyCodeLine{00141\ }
\DoxyCodeLine{00142\ \textcolor{comment}{//\ Cache\ entry\ for\ mesh\ cache}}
\DoxyCodeLine{00143\ \textcolor{keyword}{struct\ }MeshCacheEntry\ \{}
\DoxyCodeLine{00144\ \ \ \ \ Mesh\ mesh;}
\DoxyCodeLine{00145\ \ \ \ \ std::chrono::steady\_clock::time\_point\ lastAccess;}
\DoxyCodeLine{00146\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ memoryUsage;}
\DoxyCodeLine{00147\ \ \ \ \ SurfaceSettings\ settings;}
\DoxyCodeLine{00148\ \ \ \ \ }
\DoxyCodeLine{00149\ \ \ \ \ \textcolor{keywordtype}{void}\ updateAccess()\ \{}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ lastAccess\ =\ std::chrono::steady\_clock::now();}
\DoxyCodeLine{00151\ \ \ \ \ \}}
\DoxyCodeLine{00152\ \};}
\DoxyCodeLine{00153\ }
\DoxyCodeLine{00154\ \textcolor{comment}{//\ Hash\ for\ voxel\ grid\ (for\ caching)}}
\DoxyCodeLine{00155\ \textcolor{keyword}{struct\ }VoxelGridHash\ \{}
\DoxyCodeLine{00156\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ hash;}
\DoxyCodeLine{00157\ \ \ \ \ Math::BoundingBox\ bounds;}
\DoxyCodeLine{00158\ \ \ \ \ VoxelData::VoxelResolution\ resolution;}
\DoxyCodeLine{00159\ \ \ \ \ }
\DoxyCodeLine{00160\ \ \ \ \ \textcolor{keywordtype}{bool}\ operator==(\textcolor{keyword}{const}\ VoxelGridHash\&\ other)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ hash\ ==\ other.hash\ \&\&\ bounds\ ==\ other.bounds\ \&\&\ resolution\ ==\ other.resolution;}
\DoxyCodeLine{00162\ \ \ \ \ \}}
\DoxyCodeLine{00163\ \};}
\DoxyCodeLine{00164\ }
\DoxyCodeLine{00165\ \textcolor{comment}{//\ Vertex\ attributes\ for\ advanced\ rendering}}
\DoxyCodeLine{00166\ \textcolor{keyword}{struct\ }VertexAttributes\ \{}
\DoxyCodeLine{00167\ \ \ \ \ Math::Vector3f\ position;}
\DoxyCodeLine{00168\ \ \ \ \ Math::Vector3f\ normal;}
\DoxyCodeLine{00169\ \ \ \ \ Math::Vector2f\ uv;}
\DoxyCodeLine{00170\ \ \ \ \ Math::Vector3f\ tangent;}
\DoxyCodeLine{00171\ \ \ \ \ Math::Vector3f\ bitangent;}
\DoxyCodeLine{00172\ \ \ \ \ MaterialId\ material;}
\DoxyCodeLine{00173\ \};}
\DoxyCodeLine{00174\ }
\DoxyCodeLine{00175\ \textcolor{comment}{//\ Mesh\ statistics}}
\DoxyCodeLine{00176\ \textcolor{keyword}{struct\ }MeshStats\ \{}
\DoxyCodeLine{00177\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ vertexCount\ =\ 0;}
\DoxyCodeLine{00178\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ triangleCount\ =\ 0;}
\DoxyCodeLine{00179\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ degenerateTriangles\ =\ 0;}
\DoxyCodeLine{00180\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ duplicateVertices\ =\ 0;}
\DoxyCodeLine{00181\ \ \ \ \ \textcolor{keywordtype}{float}\ surfaceArea\ =\ 0.0f;}
\DoxyCodeLine{00182\ \ \ \ \ \textcolor{keywordtype}{float}\ volume\ =\ 0.0f;}
\DoxyCodeLine{00183\ \ \ \ \ Math::BoundingBox\ bounds;}
\DoxyCodeLine{00184\ \ \ \ \ }
\DoxyCodeLine{00185\ \ \ \ \ \textcolor{keywordtype}{void}\ clear()\ \{}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ *\textcolor{keyword}{this}\ =\ MeshStats();}
\DoxyCodeLine{00187\ \ \ \ \ \}}
\DoxyCodeLine{00188\ \};}
\DoxyCodeLine{00189\ }
\DoxyCodeLine{00190\ \textcolor{comment}{//\ Simplification\ settings}}
\DoxyCodeLine{00191\ \textcolor{keyword}{struct\ }SimplificationSettings\ \{}
\DoxyCodeLine{00192\ \ \ \ \ \textcolor{keywordtype}{float}\ targetRatio\ =\ 0.5f;\ \ \textcolor{comment}{//\ Target\ triangle\ count\ ratio}}
\DoxyCodeLine{00193\ \ \ \ \ \textcolor{keywordtype}{float}\ maxError\ =\ 0.01f;\ \ \ \ \textcolor{comment}{//\ Maximum\ allowed\ error}}
\DoxyCodeLine{00194\ \ \ \ \ \textcolor{keywordtype}{bool}\ preserveBoundary\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00195\ \ \ \ \ \textcolor{keywordtype}{bool}\ preserveTopology\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00196\ \ \ \ \ \textcolor{keywordtype}{bool}\ preserveUVs\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00197\ \ \ \ \ }
\DoxyCodeLine{00198\ \ \ \ \ \textcolor{keyword}{static}\ SimplificationSettings\ Aggressive();}
\DoxyCodeLine{00199\ \ \ \ \ \textcolor{keyword}{static}\ SimplificationSettings\ Conservative();}
\DoxyCodeLine{00200\ \ \ \ \ \textcolor{keyword}{static}\ SimplificationSettings\ Balanced();}
\DoxyCodeLine{00201\ \ \ \ \ \textcolor{keyword}{static}\ SimplificationSettings\ Quality();}
\DoxyCodeLine{00202\ \};}
\DoxyCodeLine{00203\ }
\DoxyCodeLine{00204\ \}}
\DoxyCodeLine{00205\ \}}

\end{DoxyCode}
